# 后台接口规范

现状：前后端联调太耗时，联调占到开发周期至少一半时间，还有联调不可控，导致项目无法准确估期。

## 接口注释

目前存在的问题：

- 后台写文档是复制其他的文档来改的，经常出现方法名没改或者接口URL没改

- 部分字段说明不详细，甚至不注释

- 字段改动口头通知，接口文档没改动

  推荐方案：

 前端只看文档，不接受口头改动通知。文档改后，再通知前端已改动。推荐使用YApi 可视化接口管理平台

## 请求方法

目前存在的问题：

- 一个 `post` 方法撸到底

推荐方案：restful风格

## 字段命名

目前存在的问题：

- 同一个语意，不同的命名

  推荐方案：同一个语意，必须全站统一命名

- 添加和编辑和详情响应数据结构不一样，导致前端对数据结构各种转换。最典型的是添加是{ name , phone } , 详情是 { recipientVo: { name , phone }}, 编辑又是 { name , phone } 很恶心

  推荐方案：添加和编辑和详情，数据结构要保持一致

## 接口文档

目前存在的问题：

- 文档有的在rap上, 有的在confluence上。

- 目录不规范，有的是按项目划分的不同端的接口放在一起，有的是按功能模块划分不同端的接口放在一起

- confluence 不适合管理接口，简单的嵌套关系都看不出, 不能直出mock服务。

  推荐方案：接口文档统一使用[YApi 可视化接口管理平台][1]，可以内部安装, 接口管理/mock数据/自动化测试等整套解决方案都有。重新整理conflunce上的文档，迁至YAPI。

## 接口质量（联调标准）

目前存在的问题：

- 没有自测直接联调，或者测试场景覆盖不到

推荐方案：通过查看自动化测试通过率来判断是否达到联调标准


## 联调环境

目前存在的问题：

- 联调不使用dev环境，直接在qa环境联调。如果有提测任务，联调就得终止。
- dev 环境不能多项目并行联调

推荐方案：专人维护dev环境，保证dev稳定性。非提测任务不得在qa构建


[1]:http://yapi.demo.qunar.com/ "YApi 可视化接口管理平台"